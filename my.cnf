[client]
port		= 3306
socket		= /var/run/mysqld/mysqld.sock

[mysqld]
#
# * Basic Settings
#
skip-host-cache
skip-name-resolve
skip-external-locking
bind-address   			=0.0.0.0
port					=3306
datadir					=/var/lib/mysql
tmpdir					=/tmp
socket					=/var/run/mysqld/mysqld.sock
user					=mysql

# Error logging goes to syslog due to /etc/mysql/conf.d/mysqld_safe_syslog.cnf.
#
# we do want to know about network errors and such
log-error	=/dev/stderr
log_warnings		= 3
#
# Enable the slow query log to see queries with especially long duration
#slow_query_log[={0|1}]
slow_query_log_file		= /var/log/mysql/mariadb-slow.log
long_query_time 		= 10
expire_logs_days		= 10
max_binlog_size     	= 100M


default-storage-engine=InnoDB
innodb-autoinc-lock-mode=2
innodb-flush-log-at-trx-commit=0
innodb-buffer-pool-size=122M
innodb-doublewrite=1
innodb-flush-method=O_DIRECT

log-bin					=ON
binlog-format			=ROW
wsrep-provider			=/usr/lib/galera/libgalera_smm.so
wsrep-sst-method		=xtrabackup-v2
wsrep_on				=ON 
query-cache-size=0
query_cache_type=0
wsrep_provider_options="socket.ssl_key=/etc/mysql/ssl/server-key.pem;socket.ssl_cert=/etc/mysql/ssl/server-cert.pem;socket.ssl_ca=/etc/mysql/ssl/ca-cert.pem"
# following to be changed by docker-entrypoint.sh before mysql_install_db
wsrep-node-address=
wsrep-node-name=
wsrep-cluster-name=
wsrep-cluster-address=
wsrep-sst-auth=
wsrep-sst-donor=


# For generating SSL certificates I recommend the OpenSSL GUI "tinyca".
ssl-ca	=/etc/mysql/ssl/ca-cert.pem
ssl-cert=/etc/mysql/ssl/server-cert.pem
ssl-key	=/etc/mysql/ssl/server-key.pem


[mysql_safe]
log-error	=/dev/stderr
log_warnings		= 3
pid-file	=/var/run/mysqld/mysqld.pid
socket		= /var/run/mysqld/mysqld.sock
nice		= 0


# xtrabackup Configuration
[sst]
#progress=1
#compressor="gzip"
#decompressor="gzip -dc"
#rebuild=ON
#compact=ON
encrypt	=3
tca		=/etc/mysql/ssl/ca-cert.pem
tcert	=/etc/mysql/ssl/server-cert.pem
tkey	=/etc/mysql/ssl/server-key.pem

[mysql]
#no-auto-rehash	# faster start of mysql but no tab completion
ssl-ca 		= /etc/mysql/ssl/ca-cert.pem
ssl-key 	= /etc/mysql/ssl/client-key.pem
ssl-cert 	= /etc/mysql/ssl/client-cert.pem

[mysqldump]
quick
quote-names
max_allowed_packet	= 16M

[isamchk]
key_buffer		= 16M

